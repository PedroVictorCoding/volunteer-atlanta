{% extends 'base.html' %}
{% load static %}

{% block title %}
<title>Profile - NAHS Volunteer Hub</title>


<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.js" charset="utf-8"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.js"></script>
{% endblock title %}

{% block content %}

<div style="margin-top:10px">
  <div class="container">
    <h3>Profile:</h3>
    <ul class="list-group">
      <li class="list-group-item">Username: {{ user }}</li>
      <li class="list-group-item">First Name: {{ user.first_name }}</li>
      <li class="list-group-item">Last Name: {{ user.last_name }}</li>
      <li class="list-group-item">Email: {{ user.email }}</li>
      <li class="list-group-item">Your Token: {{ token }}</li>
    </ul>
    <p>A token is what you give to people so that they can find you
    <br>
    For Example: /accounts/profile/(Your Token Here)
    </p>
  </div>

  <div id="volunteeringLogger" class="container bg-white border rounded shadow-sm flex-md-row mb-4">
    <form style="padding:10px" method="post">
      <h4>Log Your Activities:</h4>
    <div id="formDiv" class="form-group">
      {% csrf_token %}
      {{ form.as_p }}
      <div id="signatureBox"></div>
      <br><small>This action is not reversable</small>
      <button type="submit" id="submitting" data class="btn btn-primary btn-lg btn-block">Submit</button>
      </div>
    </form>

  </div>

  <script>

    var wind = document.getElementById('formDiv').offsetWidth;

    function setup(){
      var cnv = createCanvas(wind, 150);
      background(51);
      cnv.parent('signatureBox');
    }

    var array_save = [];
    var signatureCoordinates = "";

    function draw() {
      stroke(255);
      if (mouseIsPressed === true) {
        strokeWeight(2);
        line(mouseX, mouseY, pmouseX, pmouseY);
        append(array_save, mouseX + "," + mouseY + "," + pmouseX + "," + pmouseY);
        document.getElementById("signatureArray").value = array_save;
        signatureCoordinates = document.getElementById('signatureArray').value;
      }
    }

  </script>


<br>

<h3 class="container">Community Service Log:</h3>


<table class="table">
  <thead>
    <tr>
      <th scope="col">Agency Name</th>
      <th scope="col">Activity</th>
      <th scope="col">Hours</th>
      <th scope="col">Date</th>
      <th scope="col">Supervisor and Contact</th>
      <th scope="col">View More (Signature)</th>
    </tr>
  </thead>
  <tbody>
    {% for log in logs %}
    <tr>
      <td>{{ log.agency_name }}</td>
      <td>{{ log.activity|linebreaks }}</td>
      <td>{{ log.hours }}</td>
      <td>{{ log.supervisor_contact }}</td>
      <td><a class="btn btn-primary" href="/accounts/post/{{ log.pk }}">Click to view</a></td>
    </tr>
    {% endfor %}
  </tbody>
</table>

  {% for log in logs %}

  <div class="container bg-white border rounded-lg shadow-sm flex-md-row mb-4">
          <div class="col p-4 d-flex flex-colunm positon-static">
            <div class="container">
              <div class="row">
                <div class="col">
                  <small class="form-text text-muted">Date(s) of Activity: {{ log.date_activity }}</small>
                </div>
                <div class="col">
                  <!--<p class="p-1 text-muted" style="text-align:right;float:right">by {{ log.user }}</p>-->
                </div>
              </div>
              <h5 class="p-1">Agency Name: {{ log.agency_name }}</h5>
              <h5 class="p-1">Activity: {{ log.activity|linebreaks }}</h5>
              <h5 class="p-1">Hours: {{ log.hours }}</h5>
              <h5 class="p-1">Supervisor: {{ log.supervisor_contact }}</h5>
              <h5 id="StoredSignature" class="p-1">Signature: <a class="btn btn-primary" href="/accounts/post/{{ log.pk }}">Click to view</a></h5>
            </div>
          </div>
          </div>



          <script>
            function IndividualPost(){
              window.location = "/accounts/profile/" + {{ log.signature }};
            }
          </script>

  <!-- <script src="{% static 'loadSignature.js' %}" charset="utf-8">
          var array_save = {{ log.signature }};
          </script> -->


  {% endfor %}


</div>


{% endblock content %}
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="/docs/4.3/assets/js/vendor/jquery-slim.min.js"><\/script>')</script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous"></script>
